{% extends "src/Bowling/Resources/views/layout.html.twig" %}

{%set menu = 'Entrainements' %}
{%set titre = 'carnet' %}

{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" type="text/css" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.2.0/css/datepicker.css">
{% endblock %}

{% block breadcrumb %}
    {{ parent() }}
    <li>{{ menu }}</li>
    <li>{{ titre }}</li>
    <li>Ajout</li>
    {% endblock %}

{% block content %}

    {% include 'app/Resources/views/fragments/titreMode.html.twig' with {'genre': 'm'} %}

    {{ form_start(form, { 'attr': { 'role': 'form' }, 'method': 'post' }) }}

    {{ form_errors(form) }}

    {% include 'src/Bowling/Resources/views/entrainements/formCarnetEntrainement.html.twig' %}

    {{ form_end(form) }}

{% endblock %}
{% block javascripts %}    
    {{ parent() }}
    <script src="{{ baseRoutePrefix }}/libraries/bootstrap-datepicker-master/js/bootstrap-datepicker.js" type="text/javascript"></script>
    <script src="{{ baseRoutePrefix }}/libraries/bootstrap-datepicker-master/js/locales/bootstrap-datepicker.fr.js" type="text/javascript"></script>

    <script type="text/javascript">
        $(document).ready(function () {
            // Focus sur le premier champ d'input
            //$("input:first").focus();
            var DATE_PICKER_CONFIG = {
                autoclose: true,
                calendarWeeks: true,
                weekStart: 1,
                language: "fr",
                todayHighlight: true,
                todayBtn: "linked",
                daysOfWeekHighlighted: '06',
            {#                startDate: "{{ periode.dtDeb|date('d/m/Y') }}",
                    endDate: "{{ periode.dtFin|date('d/m/Y') }}"
    #}            };
            $(".datepicker").datepicker(DATE_PICKER_CONFIG);
            // MÃ J des bornes du datepicker
            $(document).on("focus", ".datepicker", function (e) {
                e.preventDefault();
                var dateStart = $("#CarnetForm_dateAchat").datepicker('getDate', '+360');
                dateStart.setDate(dateStart.getDate());
                    console.log(dateStart);
                    $(".dateFinValidit").datepicker(DATE_PICKER_CONFIG)
                            .datepicker("setStartDate", dateStart)
                            //.datepicker("setEndDate", dateEnd)
                            ;
                    //.datepicker("setDate", dateEnd);
                    return false;
                });

            });
    </script>
{% endblock %}